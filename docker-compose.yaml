version: '3.9'

services:
    api-php-cli:
        build:
            context: docker/api/php-cli
        user: '1000:1000'
        volumes:
            - ./api:/app
        restart: on-failure

    frontend-node-cli:
        build:
            context: docker/frontend/node-cli
        user: '1000:1000'
        volumes:
            - ./frontend:/app
        restart: on-failure

    mysql:
        image: mysql:8.0.31
        environment:
            MYSQL_ROOT_PASSWORD: root
            MYSQL_DATABASE: news
        restart: on-failure

    phpmyadmin:
        image: phpmyadmin:latest
        environment:
            PMA_HOST: mysql
        ports:
            - "5000:80"
        restart: on-failure